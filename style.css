* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    height: 100vh; 
    display: flex; 
    justify-content: center; 
    align-items: center;
    font-family: 'Nunito', sans-serif; 
    background-color: #eef2f5; 
    overflow: hidden;
}

/* EKRAN GEÇİŞLERİ */
.screen {
    position: absolute; width: 100%; height: 100%; top: 0; left: 0;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    background-color: #eef2f5; transition: opacity 0.5s ease; z-index: 10;
}
.hidden { display: none !important; }

/* --- MENÜ TASARIMI --- */
.landing-content {
    background: rgba(255, 255, 255, 0.95);
    padding: 3.5rem 4rem;
    border-radius: 30px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.5);
    max-width: 90%;
}

.landing-content h1 {
    font-size: 3rem;
    font-weight: 800;
    color: #1e293b;
    margin-bottom: 0.5rem;
    letter-spacing: -1px;
}

.landing-content p {
    font-size: 1.1rem;
    color: #64748b;
    margin-bottom: 2.5rem;
    font-weight: 600;
}

.menu-buttons {
    display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;
}

.menu-btn {
    padding: 16px 32px;
    font-size: 1.1rem;
    cursor: pointer;
    color: white;
    border: none;
    border-radius: 16px;
    transition: all 0.3s ease;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    font-family: 'Nunito', sans-serif;
    font-weight: 700;
    display: flex; align-items: center; gap: 10px;
}

#btn-open-book { background: linear-gradient(135deg, #6366f1, #4f46e5); }
#btn-open-puzzle { background: linear-gradient(135deg, #f59e0b, #d97706); }

.menu-btn:hover { transform: translateY(-3px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
.menu-btn:active { transform: translateY(-1px); }

.nav-btn { 
    position: absolute; top: 20px; left: 20px; 
    padding: 10px 20px; 
    background-color: #ffffff; 
    color: #334155; 
    border: 1px solid #cbd5e1;
    font-weight: 700;
    border-radius: 12px; 
    cursor: pointer; 
    z-index: 10000; 
    transition: all 0.2s;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}
.nav-btn:hover { background-color: #f8fafc; transform: translateY(-1px); }

/* NAVBAR & FOOTER */
.navbar {
    position: absolute; top: 0; left: 0; width: 100%; padding: 25px 40px;
    display: flex; justify-content: flex-start; z-index: 20;
}
.logo { font-size: 1.5rem; font-weight: 900; color: #334155; letter-spacing: 1px; }

.nav-logo {
    /* 1. BOYUT AYARI */
    height: 100px; /* Burayı artırarak logoyu büyütüp küçültebilirsin (örn: 80px, 120px dene) */
    width: auto;   /* En-boy oranı bozulmasın */
    object-fit: contain;

    /* 2. KONUM AYARI (Sol Üste Alma) */
    /* Navbar zaten sol üstte ama logoyu biraz daha kenarlara itmek/çekmek için bunları kullan */
    margin-left: -10px; /* Sola daha çok yanaştırır (negatif değer sola çeker) */
    margin-top: 5px;  /* Üstten birazcık aşağı iter */

    /* Not: Eğer navbar'ın kendi içinde padding (iç boşluk) varsa,
       onu da azaltman gerekebilir ama önce bunu dene muhtemelen yetecektir. */
}

.footer {
    position: absolute; bottom: 20px; width: 100%; text-align: center;
    color: #94a3b8; font-size: 0.85rem; z-index: 20;
}
.footer strong { color: #64748b; }

/* --- KİTAP TASARIMI (YATAY FORMAT) --- */
.book-section { 
    position: relative; 
    width: 100%; 
    height: 100%; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
    perspective: 2500px;
    background-color: #eef2f5;
    overflow: hidden; /* Taşmaları gizle */
}

.book { 
    position: relative; 
    width: 90vw; 
    max-width: 1100px; 
    height: 30vw; /* 35vw'den 30vw'ye düşürüldü */
    max-height: 450px; /* 500px'den 450px'ye düşürüldü */
    display: flex;
    justify-content: center;
    transition: transform 0.5s ease;
    transform-style: preserve-3d;
}

.paper { 
    position: absolute; 
    width: 50%; 
    height: 100%; 
    top: 0; 
    right: 0; 
    perspective: 1500px; 
    transform-origin: left center; 
    /* SMOOTH DÜZELTME: GPU Hızlandırma ve Geçiş Ayarı */
    transition: transform 0.7s cubic-bezier(0.25, 1, 0.5, 1); 
    transform-style: preserve-3d; 
    z-index: 1;
    will-change: transform; /* Tarayıcıya bunun değişeceğini bildirir (Performans artırır) */
    background-color: transparent; /* Kağıt arkası şeffaf */
}

.front, .back { 
    position: absolute; 
    width: 100%; 
    height: 100%; 
    top: 0; 
    left: 0; 
    backface-visibility: hidden; 
    background-color: transparent; /* BEYAZLIK DÜZELTME: Şeffaf yapıldı */
    display: flex; 
    justify-content: center; 
    align-items: center;
    /* Box shadow kaldırıldı veya çok hafifletildi ki render yükü azalsın */
    box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
}

.front { z-index: 2; }
.back { transform: rotateY(180deg); z-index: 1; }

.flipped { transform: rotateY(-180deg); }

.front-content, .back-content {
    width: 100%; 
    height: 100%; 
    background-color: transparent; 
}

.front-content img, .back-content img { 
    width: 100%; 
    height: 100%; 
    /* BEYAZLIK DÜZELTME: 'fill' boşluk bırakmadan doldurur */
    object-fit: fill; 
    display: block; 
}

/* Masaüstünde mobil görünümü gizle */
.hidden-desktop { display: none; }

.controls { 
    margin-top: 60px; 
    z-index: 9999; 
    display: flex;
    gap: 20px;
}

.controls button { 
    padding: 12px 30px; 
    cursor: pointer; 
    background: #334155; 
    color: white; 
    border: none; 
    border-radius: 12px; 
    font-weight: 600;
    transition: background 0.2s;
}
.controls button:hover { background: #475569; }


/* --- PUZZLE TASARIMI (YENİLENMİŞ) --- */
.puzzle-wrapper {
    display: flex; 
    flex-direction: column; 
    align-items: center;
    width: 100%;
    height: 100%;
    padding-top: 60px; /* Navbar payı */
    justify-content: flex-start;
}

.puzzle-wrapper h1 {
    font-size: 2rem;
    color: #334155;
    margin-bottom: 20px;
}

.game-area { 
    display: flex; 
    gap: 30px; 
    align-items: center; 
    justify-content: center; 
    flex-wrap: nowrap; 
    padding: 20px;
    max-width: 1000px;
}

/* Puzzle Tahtası */
#puzzle-board {
    display: grid; 
    grid-template-columns: repeat(3, 120px); 
    grid-template-rows: repeat(3, 120px);
    gap: 0; 
    padding: 0; 
    background-color: #ffffff; 
    border-radius: 16px; 
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    border: 2px solid #e2e8f0;
    flex-shrink: 0; 
    width: 364px; 
    height: 364px;
    overflow: hidden;
}

.puzzle-slot {
    width: 120px; 
    height: 120px; 
    background-color: #f1f5f9; 
    border: 1px dashed rgba(203, 213, 225, 0.6);
    position: relative; 
    box-sizing: border-box;
}

/* Parça Havuzu */
#piece-repository {
    width: 364px; 
    height: 364px; 
    background: #ffffff; 
    border-radius: 16px; 
    padding: 10px; 
    display: grid; 
    grid-template-columns: repeat(3, 1fr); 
    grid-auto-rows: min-content;
    gap: 10px;
    justify-items: center;
    align-content: start;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
    border: 2px solid #e2e8f0;
    overflow-y: auto; 
    box-sizing: border-box;
}

.puzzle-piece {
    width: 100px; 
    height: 100px; 
    cursor: grab; 
    z-index: 10;
    transition: transform 0.2s, box-shadow 0.2s; 
    filter: drop-shadow(0 4px 3px rgba(0,0,0,0.15));
}
.puzzle-piece:active { 
    cursor: grabbing; 
    transform: scale(1.05); 
    z-index: 100; 
}

/* Parça slot içindeyken tam otursun */
.puzzle-slot .puzzle-piece { 
    position: absolute; top: 0; left: 0; margin: 0; 
    filter: none; 
}

/* Clip Paths */
.puzzle-piece {
    clip-path: inset(0 0 0 0); 
    border-radius: 4px;
}

/* Confetti & Modal */
.confetti { position: absolute; width: 10px; height: 10px; top: -10px; z-index: 2000; animation: fall linear forwards; }
@keyframes fall { to { transform: translateY(100vh) rotate(720deg); } }

/* --- MODAL TASARIMI --- */
#winner-modal { 
    position: fixed; 
    top: 0; left: 0; 
    width: 100%; height: 100%; 
    background: rgba(15, 23, 42, 0.6); 
    backdrop-filter: blur(8px);
    display: flex; 
    justify-content: center; 
    align-items: center; 
    z-index: 3000; 
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

#winner-modal:not(.hidden) {
    opacity: 1;
    pointer-events: auto;
}

.modal-card { 
    background: linear-gradient(145deg, #ffffff, #f8fafc);
    padding: 40px 50px; 
    border-radius: 30px; 
    text-align: center; 
    box-shadow: 
        0 20px 25px -5px rgba(0, 0, 0, 0.1), 
        0 8px 10px -6px rgba(0, 0, 0, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.5) inset;
    max-width: 400px;
    width: 90%;
    transform: translateY(20px) scale(0.95);
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

#winner-modal:not(.hidden) .modal-card {
    transform: translateY(0) scale(1);
}

.modal-icon {
    font-size: 4rem;
    margin-bottom: 15px;
    animation: bounce 1s infinite alternate;
}

@keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-10px); } }

.modal-card h2 { 
    color: #1e293b; 
    font-size: 2rem; 
    font-weight: 800; 
    margin-bottom: 10px; 
}

.modal-card p { 
    color: #64748b; 
    font-size: 1.1rem; 
    margin-bottom: 30px; 
}

.modal-actions {
    display: flex;
    justify-content: center;
}

.primary-btn {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
    border: none;
    padding: 15px 40px;
    font-size: 1.1rem;
    font-weight: 700;
    border-radius: 15px;
    cursor: pointer;
    box-shadow: 0 10px 15px -3px rgba(34, 197, 94, 0.3);
    transition: all 0.3s ease;
    font-family: 'Nunito', sans-serif;
}

.primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 20px -5px rgba(34, 197, 94, 0.4);
}

.primary-btn:active {
    transform: translateY(0);
}


/* --- MOBİL YATAY KİTAP AYARLARI (YENİ SİSTEM) --- */
@media screen and (max-width: 768px) {
    .landing-content { padding: 2rem; width: 90%; }
    .landing-content h1 { font-size: 2rem; }
    
    .menu-buttons { flex-direction: column; width: 100%; gap: 15px; }
    .menu-btn { width: 100%; justify-content: center; }

    /* 3D Kitabı mobilde tamamen gizle */
    .book { display: none !important; }

    /* Mobil Görüntüleyiciyi aç */
    .hidden-desktop { 
        display: flex; 
        flex-direction: column; 
        align-items: center; 
        width: 100%;
    }

    #mobile-book-view {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 20px;
    }

    .mobile-card {
        width: 95vw;
        height: auto; 
        aspect-ratio: 4/3; 
        background: white;
        padding: 10px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
    }

    #mobile-current-img {
        width: 100%;
        height: 100%;
        object-fit: contain; 
        display: block;
        border-radius: 8px;
    }

    .page-indicator {
        margin-top: 15px;
        font-size: 1.2rem;
        font-weight: 700;
        color: #64748b;
        background: rgba(255,255,255,0.8);
        padding: 5px 15px;
        border-radius: 20px;
    }
    
    .controls {
        transform: none; 
        margin-top: 20px;
        width: 100%;
        display: flex;
        justify-content: center; 
        gap: 20px;
        padding-bottom: 50px; 
    }
    
    .controls button {
        padding: 15px 30px; 
        font-size: 1.1rem;
    }

    /* PUZZLE MOBİL */
    .puzzle-wrapper { padding-top: 70px; justify-content: flex-start; }
    .game-area { 
        flex-direction: column; 
        align-items: center; 
        gap: 15px; 
        flex-wrap: wrap; 
    }
    
    #puzzle-board {
        grid-template-columns: repeat(3, 85px);
        grid-template-rows: repeat(3, 85px);
        gap: 0; 
    }
    .puzzle-slot { width: 85px; height: 85px; }
    
    #piece-repository { 
        width: 300px; 
        height: auto;
        min-height: 120px; 
        max-height: 300px;
        padding: 10px;
        grid-template-columns: repeat(3, 1fr); 
        gap: 8px;
    }
    
    .puzzle-piece {
        width: 100% !important; 
        height: auto !important;
        aspect-ratio: 1/1;
    }

    /* Mobilde puzzle taşma ve kaymayı düzeltme */
    #puzzle-board {
        width: calc(85px * 3);
        height: calc(85px * 3);
        box-sizing: border-box;
    }

    #piece-repository {
        width: calc(85px * 3);
        max-width: 95vw;
    }

    .game-area {
        padding: 10px;
        gap: 12px;
    }

    /* Mobilde body'nin taşan içeriği kaydırılabilsin */
    body {
        overflow: auto;
    }
}
